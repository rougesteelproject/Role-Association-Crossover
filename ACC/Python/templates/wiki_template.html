{% extends "HeadFoot.html" %}

{% block title %}
  {{generator.base_name}}({{generator.level}})
{% endblock %}

{% block content %}
    
      <div class="character-nav">
        <ul>
          <li><a>Web View ({{generator.base_name}})</a></li>
          {%if generator.base_is_actor%}
          <li><a>{{url_for('actor_editor')}}?editorID={{generator.baseID}}</a>a></li>
          {%else%}
          <li><a>{{url_for('mr_editor')}}?editorID={{generator.baseID}}</a></li>
          {%endif%}
        </ul>
        
        <div class="hub-sigils">
          {{hub_sigils}}
        </div>
        <div class="number-of-links">
          <form action="{{url_for('wiki')}}" method="GET">
          <label for="level">How many layers deep?</label>
          <input type="number" id="level" name="level" min="1" step=".5" value="1">
          <input type="text" style="display:none" name="baseID" value="{{generator.baseID}}">
          <input type="text" style="display:none" name="base_is_actor" value={{generator.base_is_actor}}>
          <input type="submit">
        </form>
        </div>
      </div>
      <div class="actor-content">
        {%for actor in generator.displayed_actors%}
        
        <div class="bio">
          #TODO make a little box for the gallery and captions
          
          {%for image in actor.gallery%}
          <img alt="{{image.file}}" src="{{url_for('static', filename=image.file)}}"/>
          <p class='actor-img-caption'>{{image.caption}}</p>
          {%endfor%}
          <a class="editor-link" href="{{url_for('actor_editor')}}?editorID={{actor.id}}" title="edit this character"> <img  alt="editor button" src="{{url_for('static', filename='writing.png')}}" width="25" height="25"/> </a>
          <p>{{actor.bio}}</p>
          <p>Born: {{actor.birth_date}}</p>
          <p>Death: {{actor.death_date}}</p>
        </div>
        {%endfor%}
        #TODO relationships, ablilities
      </div>

      #TODO an ablilities and relationships section on the bottom left for roles
      <div class="roles-section">
        
        <h1>
          {{generator.base_name}}
        </h1>
        
        {%for mr in generator.displayed_mrs%}
        <div class="meta-role-div">
          <h2>
          {{mr.name}} <a href="{{url_for('mr_editor')}}?editorID={{mr.id}}" title="edit this character"> <img alt="editor button" src="{{url_for('static', filename='writing.png')}}" width="25" height="25"/> </a>
          </h2>
          <p>
            {{mr.description}}
          </p>
          {%for role in mr.roles%}
          <div class="role-div">
            
            <h2>
              {{role.name}} <a href="{{url_for('role_editor')}}?editorID={{role.id}}" title="edit this role"> <img alt="editor button" src="{{url_for('static', filename='writing.png')}}" width="25" height="25"/> </a>
            </h2>
              #TODO make a gallery container box thing
            {%for image in role.gallery %}
            <img alt="{{image.file}}" src="{{url_for('static', filename=image.file)}}" />
            <p class='role-img-caption'>{{image.caption}}</p>
            {%endfor%}
            <p class='role-description'>
              {{role.description}}
            </p>
            <p>
              Alignment: {{role.alignment}}
            </p>
            <p>
              Status: {{role.alive_or_dead}}
            </p>
          </div>
          {%endfor%}
          {%for mr in generator.halfway%}
        <div class="meta-role-div">
          <h2>
          {{mr.name}} <a href="{{url_for('mr_editor')}}?editorID={{mr.id}}" title="edit this character"> <img alt="editor button" src="{{url_for('static', filename='writing.png')}}" width="25" height="25"/> </a>
          </h2>
          <p>
            {{mr.description}}
          </p>
          {%for role in mr.roles%}
          <div class="role-div">
            
            <h2>
              {{role.name}} <a href="{{url_for('role_editor')}}?editorID={{role.id}}" title="edit this role"> <img alt="editor button" src="{{url_for('static', filename='writing.png')}}" width="25" height="25"/> </a>
            </h2>
              #TODO make a gallery container box thing
            {%for image in role.gallery %}
            <img alt="{{image.file}}" src="{{url_for('static', filename=image.file)}}" />
            <p class='role-img-caption'>{{image.caption}}</p>
            {%endfor%}
            <p class='role-description'>
              {{role.description}}
            </p>
            <p>
              Alignment: {{role.alignment}}
            </p>
            <p>
              Status: {{role.alive_or_dead}}
            </p>
          </div>
          {%endfor%}
        </div>
        {%endfor%}
      </div>
 
{% endblock %}